<div class="row spacing">
  <h1 class="col-md-12 text-center">Machine Form</h1>
  <div class="container">
    <div class="col-md-6 offset-3">
      <div class="btn-group spacing btn-group-toggle" data-toggle="buttons" role="group" aria-label="Machine selection">
        <button *ngFor="let type of machineTypes" (click)="_selectType(type); machineForm.reset()" type="button" [class.active]="type === selectedType" class="btn btn-secondary">{{type}}</button>
      </div>
    </div>
    <form (ngSubmit)="onSubmit()" #machineForm="ngForm">
      <h2 class="col-md-12 header-left-bound">General Machine Data</h2>
      <div class="form-group row">
        <div class="col-md-6">
          <label for="deviceName">Device Name</label>
          <input type="text" class="form-control" id="deviceName" required [(ngModel)]="model.deviceName" name="deviceName" #deviceName="ngModel">
          <div [hidden]="deviceName.valid || deviceName.pristine" class="alert alert-danger">
            Device Name is required
          </div>
        </div>
        <div class="col-md-6">
          <label for="fablabId">Fablab</label>
          <ng-select [loading]="loadingFablabs" [items]=fablabs bindValue="_id" bindLabel="name" [(ngModel)]="model.fablabId" id="fablabId" name="fablabId" #fablabId="ngModel" required>
            </ng-select>
          <div [hidden]="fablabId.valid || fablabId.pristine" class="alert alert-danger">
            Fablab is required
          </div>
        </div>
      </div>

      <div class="form-group row">
        <div class="col-md-6">
          <label for="manufacturer">Manufacturer</label>
          <input type="text" class="form-control" id="manufacturer" required [(ngModel)]="model.manufacturer" name="manufacturer" #manufacturer="ngModel">
          <div [hidden]="manufacturer.valid || manufacturer.pristine" class="alert alert-danger">
            Manufacturer is required
          </div>
        </div>
      </div>

      <h2 *ngIf="selectedType" class="col-md-12 header-left-bound">
        {{selectedType}} Data
      </h2>

      <div *ngIf="selectedType === 'Printer'">
        <div class="form-group row">
          <div class="col-md-4">
            <label for="camSoftware">Cam Software</label>
            <input type="text" class="form-control" id="camSoftware" [(ngModel)]="model.camSoftware" name="camSoftware" #camSoftware="ngModel">
          </div>
          <div class="col-md-4">
            <label for="nozzleDiameter">Nozzle Diameter</label>
            <input type="text" class="form-control" id="nozzleDiameter" [(ngModel)]="model.nozzleDiameter" name="nozzleDiameter" #nozzleDiameter="ngModel">
          </div>
          <div class="col-md-4"> 
              <label for="materials">Materials</label>
              <ng-select [multiple]="true" [loading]="loadingMaterials" [hideSelected]="true" [closeOnSelect]="false" [items]=materialsArr bindLabel="material" [(ngModel)]="model.materials" id="materials" name="materials" #materials="ngModel" required>
                </ng-select> 
              </div>
        </div>

        <div class="form-group row">
          <div class="col-md-4">
            <label for="printVolumeX">Print Volume X</label>
            <input type="number" class="form-control" id="printVolumeX" [(ngModel)]="model.printVolumeX" name="printVolumeX" #printVolumeX="ngModel">
          </div>
          <div class="col-md-4">
            <label for="printVolumeY">Print Volume Y</label>
            <input type="number" class="form-control" id="printVolumeY" [(ngModel)]="model.printVolumeY" name="printVolumeY" #printVolumeY="ngModel">
          </div>
          <div class="col-md-4">
            <label for="printVolumeZ">Print Volume Z</label>
            <input type="number" class="form-control" id="printVolumeZ" [(ngModel)]="model.printVolumeZ" name="printVolumeZ" #printVolumeZ="ngModel">
          </div>
        </div>

        <div class="form-group row">
          <div class="col-md-4">
            <label for="printResolutionX">Print Resolution X</label>
            <input type="number" class="form-control" id="printResolutionX" [(ngModel)]="model.printResolutionX" name="printResolutionX"
              #printResolutionX="ngModel">
          </div>
          <div class="col-md-4">
            <label for="printResolutionY">Print Resolution Y</label>
            <input type="number" class="form-control" id="printResolutionY" [(ngModel)]="model.printResolutionY" name="printResolutionY"
              #printResolutionY="ngModel">
          </div>
          <div class="col-md-4">
            <label for="printResolutionZ">Print Resolution Z</label>
            <input type="number" class="form-control" id="printResolutionZ" [(ngModel)]="model.printResolutionZ" name="printResolutionZ"
              #printResolutionZ="ngModel">
          </div>
        </div>

        <div class="form-group row">
            <div class="col-md-4">
              <label for="numberOfExtruders">Number of Extruders</label>
              <input type="number" class="form-control" id="numberOfExtruders" [(ngModel)]="model.numberOfExtruders" name="numberOfExtruders"
                #numberOfExtruders="ngModel">
            </div>
            <div class="col-md-4">
              <label for="pictureUrl">Picture Url</label>
              <input type="text" class="form-control" id="pictureUrl" [(ngModel)]="model.pictureUrl" name="pictureUrl"
                #pictureUrl="ngModel">
            </div>
            <div class="col-md-4">
              <label for="comment">Comment</label>
              <input type="text" class="form-control" id="comment" [(ngModel)]="model.comment" name="comment"
                #comment="ngModel">
            </div>
          </div>
      </div>

      <div class="form-group row" *ngIf="selectedType === 'Milling Machine'">
        Milling Machine
      </div>

      <div class="form-group row" *ngIf="selectedType === 'Lasercutter'">
        Lasercutter
      </div>

      <div class="form-group row" *ngIf="selectedType === 'Other Machine'">
        Other Machine
      </div>

      <button type="submit" class="btn btn-success" [disabled]="!machineForm.form.valid">Submit</button>
    </form>
  </div>
</div>